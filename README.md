## Solving MDVRPPD with Local Search Methods

Solution to the Multi-Depot Vehicle Routing Problem with Pickup and Delivery using local search methods:
* Multi-Start Descent Algorithm
* Simulated Annealing
* Genetic Algorithm
* Descent Genetic Algorithm (descent algorithm on a given percentage of solutions generated by the genetic algorithm)

## File contents

**algorithms** - listed algorithms for solving the problem

**architecture** - necessery classes for initial settings and problem construction, including the graph, customer vertex and depot (warehouse) vertex classes

**data/comparable** - example input data (used in thesis) for algorithms with appropriate postfix corresponding to the size of the dataset

**opendata** - data (*.txt) and algorithms (OpenData.py) set up for using open data modeling real situations in a bike rental service in the city of Sopot

**output** - test results in an iterative comparasion for respective datasets

## Running algorithms

**python [main.py/ OpenData.py]**

First, you need to configure a graph object that takes the number of vertices (including warehouses), provide a list of servicing vehicles, and specify the input data path/ generate new data (important: when loading data, validation functions check the dataset size's correctness - it must correspond to the number of specified vertices and depots). Then, you can run the chosen algorithm by providing the graph class object and specific parameters for that algorithm type - examples of function calls with parameters specification located in the main.py (randomly generated dataset) and OpenData.py (real dataset, important: current data is generated from the city of Sopot - open data allows for generating data from other cities in the Tricity area. To do this, you first need to generate your own Google Maps API key). 

## Sample run
### Input:

**Graph with 7 vertices and 2 warehouses**

**Parameters of customer vertices:**

VERTEX:     1  2  3  4  5<br>
DISCHARGED: 0  0  0  1  5<br>
DEMAND:     6  3  8  6 -5<br>
CAPACITY:   6  5 10  7  4<br>
STORED:     0  2  2  1  9<br>


**Fleet of vehicles for each depot:**

(8, 15)  # 8 vehicles with capacity of 15 bicycles<br>
(3, 10)  # 3 vehicles with capacity of 10 bicycles<br>
(5, 8)  # 5 vehicles with capacity of 8 bicycles<br>


**Graph adjacency matrix:**

              -1       0       1       2       3       4       5 
     -1      0.0    8.24    5.67     8.0    1.23    7.18    4.39
      0     8.24     0.0    5.13    4.23    3.68    6.85    5.45
      1     5.67    5.13     0.0    9.86     8.4     6.7    2.98
      2      8.0    4.23    9.86     0.0    8.49    2.19    5.76
      3     1.23    3.68     8.4    8.49     0.0    6.63    7.81
      4     7.18    6.85     6.7    2.19    6.63     0.0    1.23
      5     4.39    5.45    2.98    5.76    7.81    1.23     0.0

**Graph visualization:**

<img width="617" alt="image" src="https://github.com/motylele/VRP/assets/84865240/fe11f98d-8ee8-48ce-bddc-4496e488bc11">

### Output:

**Multistart descent solution:**

BEST SOLUTION =  (2, 4, 5, 1, 3)<br>
TOTAL COST = 18.22<br>
ROUTES (Index: Vehicle capacity (bat.) | Initial bikes load | Initial batteries load | [Route]):<br>
  0:    75 |    10 |     6 | [0, 2, 4, 5, 1, 0]<br>
  1:    75 |     8 |     0 | [-1, 3, -1]<br>

**Graph visualization with the solution:**

<img width="629" alt="image" src="https://github.com/motylele/VRP/assets/84865240/4ddd087a-6dfa-4cfb-9adc-f531c93cfb27">

### Comment
The algorithm determined the permutation (2, 4, 5, 1, 3), for which two routes were planned with a total travel distance of 18.22. The first route starts at depot 0 and travels throuth vertices 2, 4, 5, 1, and returns to the same depot. It is serviced by a vehicle with a capacity of 15 bicycles (75 batteries). The initial load of this vehicle for serving the first route is 10 bicycles and 6 batteries. The second route covers path -1, 3, -1, serviced by a vehicle with the same capacity and initial load of 8 bicycles and 0 batteries.
